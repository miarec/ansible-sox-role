---
# Checksums for Ansible 1.x must be sha256
- name: check for checksum (ansible 1.x)
  fail:
    msg: >
      A sha256 checksum must be provided for Ansible 1.x when
      sox_verify_checksum is set to true.
  when:
    - ansible_version.major < 2
    - sox_verify_checksum|bool
    - sox_checksum is not defined or sox_checksum|length != 64

- name: check for checksum (ansible 2.x)
  fail:
    msg: >
      There is no sha1 checksum defined for version {{ sox_version }} in
      vars/main.yml. Set sox_checksum manually or submit a PR to add this
      version.
  when:
    - ansible_version.major >= 2
    - sox_verify_checksum|bool
    - sox_checksum is not defined
    - sox_version not in sox_checksums
